import e from"@babel/runtime/helpers/objectWithoutPropertiesLoose";import n from"@babel/runtime/helpers/extends";import*as r from"@react-pdf/primitives";export*from"@react-pdf/primitives";import t,{useRef as o,useState as i,useEffect as u}from"react";import c from"queue";import a from"@babel/runtime/helpers/asyncToGenerator";import l from"@babel/runtime/regenerator";import f from"blob-stream";import s from"@react-pdf/font";import d from"@react-pdf/render";import p from"@react-pdf/pdfkit";import m from"@react-pdf/layout";import h from"react-reconciler";import{unstable_scheduleCallback as v,unstable_cancelCallback as b}from"scheduler";var y,g={},w=function(n){var r=n.onChange;return h({schedulePassiveEffects:v,cancelPassiveEffects:b,supportsMutation:!0,isPrimaryRenderer:!1,warnsIfNotActing:!1,appendInitialChild:function(e,n){e.children.push(n)},createInstance:function(n,r){var t=r.style;return r.children,{type:n,box:{},style:t||{},props:e(r,["style","children"])||{},children:[]}},createTextInstance:function(e,n){return{type:"TEXT_INSTANCE",value:e}},finalizeInitialChildren:function(e,n,r){return!1},getPublicInstance:function(e){return e},prepareForCommit:function(){},clearContainer:function(){},prepareUpdate:function(e,n,r,t){return!function e(n,r){var t=Object.keys(n),o=Object.keys(r);if(t.length!==o.length)return!1;for(var i=0;i<t.length;i+=1){var u=t[i];if("render"===u&&!n[u]!=!r[u])return!1;if("children"!==u&&n[u]!==r[u]){if("object"==typeof n[u]&&"object"==typeof r[u]&&e(n[u],r[u]))continue;return!1}if("children"===u&&("string"==typeof n[u]||"string"==typeof r[u]))return n[u]===r[u]}return!0}(r,t)},resetAfterCommit:void 0===r?function(){}:r,resetTextContent:function(e){},getRootHostContext:function(){return g},getChildHostContext:function(){return g},shouldSetTextContent:function(e,n){return!1},now:Date.now,useSyncScheduling:!0,appendChild:function(e,n){e.children.push(n)},appendChildToContainer:function(e,n){"ROOT"===e.type?e.document=n:e.children.push(n)},insertBefore:function(e,n,r){var t,o=null===(t=e.children)||void 0===t?void 0:t.indexOf(r);void 0!==o&&-1!==o&&n&&e.children.splice(o,0,n)},removeChild:function(e,n){var r,t=null===(r=e.children)||void 0===r?void 0:r.indexOf(n);void 0!==t&&-1!==t&&e.children.splice(t,1)},removeChildFromContainer:function(e,n){var r,t=null===(r=e.children)||void 0===r?void 0:r.indexOf(n);void 0!==t&&-1!==t&&e.children.splice(t,1)},commitTextUpdate:function(e,n,r){e.value=r},commitUpdate:function(n,r,t,o,i){var u=i.style,c=e(i,["style"]);n.props=c,n.style=u}})},C="2.0.18",x=new s,T={},P=function(e){var n={type:"ROOT",document:null},r=(y=y||w({onChange:function(){for(var e,n=(null===(e=T.change)||void 0===e?void 0:e.slice())||[],r=0;r<n.length;r+=1)n[r]()}})).createContainer(n),t=function(e){y.updateContainer(e,r,null)};e&&t(e);var o=function(){var e=a(l.mark(function e(r){var t,o,i,u,c;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!0),t=n.document.props||{},o=t.pdfVersion,i=t.language,u=new p({compress:r,pdfVersion:o,lang:i,displayTitle:!0,autoFirstPage:!1}),e.next=6,m(n.document,x);case 6:return c=e.sent,e.abrupt("return",d(u,c));case 8:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),i=function(e){void 0===e&&(e={}),n.document.props.onRender&&n.document.props.onRender(e)};return{on:function(e,n){T[e]||(T[e]=[]),T[e].push(n)},container:n,toBlob:function(){var e=a(l.mark(function e(){var n,r;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return n=e.sent,r=n.pipe(f()),e.abrupt("return",new Promise(function(e,n){r.on("finish",function(){try{var t=r.toBlob("application/pdf");i({blob:t}),e(t)}catch(e){n(e)}}),r.on("error",n)}));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),toBuffer:function(){var e=a(l.mark(function e(){return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(),e.abrupt("return",o());case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),toString:function(){var e=a(l.mark(function e(){var n,r;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,o(!1);case 3:return r=e.sent,e.abrupt("return",new Promise(function(e,t){try{r.on("data",function(e){n+=e}),r.on("end",function(){i(),e(n)})}catch(e){t(e)}}));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),removeListener:function(e,n){if(T[e]){var r=T[e].indexOf(n);r>-1&&T[e].splice(r,1)}},updateContainer:t}},S=x,O={create:function(e){return e}},R=function(e){var r=e.document,t=o(null),a=i({url:null,blob:null,error:null,loading:!1}),l=a[0],f=a[1];u(function(){var e=c({autostart:!0,concurrency:1}),o=function(){f(function(e){return n({},e,{loading:!0})}),e.splice(0,e.length,function(){return l.error?Promise.resolve():t.current.toBlob()})};return t.current=P(),t.current.on("change",o),t.current.updateContainer(r),e.on("error",function(e){console.error(e),f(function(r){return n({},r,{error:e})})}),e.on("success",function(e){f({blob:e,error:null,loading:!1,url:URL.createObjectURL(e)})}),function(){e.end(),t.current.removeListener("change",o)}},[]),u(function(){return function(){l.url&&URL.revokeObjectURL(l.url)}},[l.url]);return[l,function(){t.current.updateContainer(r)}]},k=function(e){var n=e.document,r=e.children,t=R({document:n}),o=t[0],i=t[1];return u(i,[n]),n?r(o):(console.warn("You should pass a valid document to BlobProvider"),null)},F=function(r){var o=r.title,i=r.style,c=r.className,a=r.children,l=r.innerRef,f=r.showToolbar,s=void 0===f||f,d=e(r,["title","style","className","children","innerRef","showToolbar"]),p=R({document:a}),m=p[0],h=p[1];return u(h,[a]),t.createElement("iframe",n({title:o,ref:l,style:i,src:m.url+"#toolbar="+(s?1:0),className:c},d))},N=function(e){var n=e.style,r=e.children,o=e.className,i=e.document,c=e.fileName,a=void 0===c?"document.pdf":c,l=R({document:i}),f=l[0],s=l[1];if(u(s,[r]),!i)return console.warn("You should pass a valid document to PDFDownloadLink"),null;return t.createElement("a",{style:n,href:f.url,download:a,className:o,onClick:function(){window.navigator.msSaveBlob&&window.navigator.msSaveBlob(f.blob,a)}},"function"==typeof r?r(f):r)},B=function(e){throw new Error(e+" is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.")},L=function(){B("renderToStream")},I=function(){B("renderToString")},j=function(){B("renderToFile")},D=function(){B("render")};export default n({pdf:P,usePDF:R,Font:S,version:"2.0.18",StyleSheet:O,PDFViewer:F,BlobProvider:k,PDFDownloadLink:N,renderToStream:L,renderToString:I,renderToFile:j,render:D},r);export{k as BlobProvider,S as Font,N as PDFDownloadLink,F as PDFViewer,O as StyleSheet,w as createRenderer,P as pdf,D as render,j as renderToFile,L as renderToStream,I as renderToString,R as usePDF,C as version};
//# sourceMappingURL=react-pdf.browser.es.min.js.map
